# 订单统计功能

## 功能概述

订单统计功能是基于设备排班管理系统的订单管理模块开发的统计分析页面，提供多维度的订单数据分析和可视化展示。

## 功能特性

### 1. 统计卡片
- **今日订单**: 显示当日的订单数量
- **本周订单**: 显示本周的订单数量
- **本月订单**: 显示本月的订单数量
- **总方量**: 显示统计周期内的总方量
- **完成率**: 显示订单完成率百分比
- **活跃客户**: 显示活跃客户数量

### 2. 筛选功能
- **时间范围**: 支持今日、本周、本月、本季度、本年、自定义时间范围
- **客户筛选**: 按客户名称筛选订单数据
- **状态筛选**: 按订单状态筛选（新建、已排班、执行中、已完工、已结算、已取消）
- **重置功能**: 一键重置所有筛选条件

### 3. 图表展示
- **订单状态分布**: 饼图展示各状态订单的分布情况
- **订单量趋势**: 折线图展示订单量随时间的变化趋势

### 4. 详细统计表格
- **客户维度统计**: 按客户统计订单数量、方量、完成情况等
- **状态分布**: 显示各客户的订单状态分布
- **完成率**: 计算并显示各客户的订单完成率
- **详情查看**: 点击查看详情可查看客户详细信息

### 5. 客户详情抽屉
- **基本信息**: 显示客户联系人、电话、地址等基本信息
- **统计信息**: 显示总订单数、总方量、平均方量等统计信息
- **订单列表**: 显示该客户的所有订单详情
- **订单状态**: 用不同颜色标识订单状态

### 6. 导出功能
- **CSV导出**: 支持将统计数据导出为CSV格式
- **自定义文件名**: 文件名包含导出日期
- **完整数据**: 导出包含筛选条件和统计数据

## 文件结构

```
pages/order-statistics/
├── index.html          # 主页面文件
├── style.css           # 样式文件
├── script.js           # 脚本文件
└── README.md           # 说明文档
```

## 技术特性

### 1. 响应式设计
- 支持桌面端和移动端访问
- 自适应布局，适配不同屏幕尺寸
- 移动端优化的交互体验

### 2. 现代化UI
- 使用FontAwesome图标库
- 统一的配色方案和设计风格
- 平滑的动画过渡效果
- 悬停交互反馈

### 3. 数据管理
- 模拟数据结构，便于后续接入真实API
- 模块化的数据管理
- 支持实时数据刷新

### 4. 交互体验
- 抽屉式详情展示
- 实时筛选和数据更新
- 加载状态提示
- 错误处理机制

## 使用说明

### 1. 访问页面
直接在浏览器中打开 `index.html` 文件即可访问订单统计页面。

### 2. 筛选数据
- 使用时间范围下拉菜单选择统计周期
- 使用客户筛选器选择特定客户
- 使用状态筛选器筛选特定状态的订单
- 点击重置按钮恢复默认筛选条件

### 3. 查看详情
- 在统计表格中点击"查看详情"按钮
- 右侧抽屉会显示客户的详细信息
- 包含基本信息和订单列表
- 点击关闭按钮或遮罩层关闭抽屉

### 4. 导出报表
- 点击页面头部的"导出报表"按钮
- 系统会自动生成CSV格式的报表文件
- 文件会自动下载到本地

## 数据说明

### 模拟数据结构
当前使用模拟数据进行展示，数据结构包括：
- 统计卡片数据
- 客户统计数据
- 订单状态分布数据
- 订单量趋势数据
- 客户详情数据

### 真实数据接入
要接入真实数据，需要：
1. 修改 `script.js` 中的 `refreshData()` 函数
2. 添加实际的API调用
3. 更新数据结构以匹配后端API
4. 添加错误处理和加载状态

## 样式定制

### 配色方案
- 主色调: #3498db (蓝色)
- 背景色: #f5f7fa (浅灰)
- 文字色: #2c3e50 (深灰)
- 边框色: #e1e5e9 (中灰)

### 字体
- 主字体: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto
- 标题字体: 600字重
- 正文字体: 400字重

## 浏览器兼容性

- Chrome 60+
- Firefox 55+
- Safari 12+
- Edge 79+

## 后续优化建议

1. **图表库集成**: 集成Chart.js或ECharts实现真实图表
2. **数据缓存**: 添加数据缓存机制提升性能
3. **权限控制**: 根据用户权限显示不同数据
4. **实时更新**: 添加WebSocket实现数据实时更新
5. **更多导出格式**: 支持PDF、Excel等格式导出
6. **数据钻取**: 支持从统计卡片钻取到详细数据
7. **自定义报表**: 支持用户自定义统计维度 